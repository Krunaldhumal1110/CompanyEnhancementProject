{"ast":null,"code":"import React from'react';import{useParams,Link}from'react-router-dom';import{Typography,Button,Box,List,ListItem,ListItemText}from'@mui/material';import{useQuery,useMutation,useQueryClient}from'@tanstack/react-query';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const fetchMachine=async id=>{const{data}=await axios.get(\"/api/machines/\".concat(id));return data;};const fetchQCForms=async id=>{const{data}=await axios.get(\"/api/qc?machineId=\".concat(id));return data;};const completeMachineApi=async id=>{const{data}=await axios.post(\"/api/machines/\".concat(id,\"/complete\"));return data;};function MachineDetail(){const{id}=useParams();const queryClient=useQueryClient();const{data:machine,isLoading}=useQuery({queryKey:['machine',id],queryFn:()=>fetchMachine(id)});const{data:qcForms=[]}=useQuery({queryKey:['qcForms',id],queryFn:()=>fetchQCForms(id)});const completeMutation=useMutation({mutationFn:()=>completeMachineApi(id),onSuccess:()=>queryClient.invalidateQueries({queryKey:['machine',id]})});if(isLoading||!machine)return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});return/*#__PURE__*/_jsxs(Box,{sx:{mt:2},children:[/*#__PURE__*/_jsxs(Typography,{variant:\"h5\",children:[machine.name,\" Details\"]}),/*#__PURE__*/_jsxs(Typography,{children:[\"Model: \",machine.model||'N/A']}),/*#__PURE__*/_jsxs(Typography,{children:[\"Product No.: \",machine.productNo||'N/A']}),/*#__PURE__*/_jsxs(Typography,{children:[\"Master Card: \",machine.masterCardInfo||'N/A']}),/*#__PURE__*/_jsx(Button,{href:\"/api/machines/\".concat(id,\"/drawing\"),target:\"_blank\",sx:{mt:1},children:\"Download Electric Drawing\"}),/*#__PURE__*/_jsx(Typography,{sx:{mt:2},children:\"QC Forms:\"}),/*#__PURE__*/_jsx(List,{children:qcForms.map(qc=>/*#__PURE__*/_jsxs(ListItem,{children:[/*#__PURE__*/_jsx(ListItemText,{primary:\"QC Form #\".concat(qc.id,\" (\").concat(qc.status,\")\")}),/*#__PURE__*/_jsx(Button,{href:\"/api/qc/\".concat(qc.id,\"/pdf\"),target:\"_blank\",children:\"Download PDF\"})]},qc.id))}),!machine.completed&&/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"success\",onClick:()=>completeMutation.mutate(),children:\"Mark as Complete\"}),/*#__PURE__*/_jsx(Button,{component:Link,to:\"/\",sx:{ml:2},children:\"Back\"})]});}export default MachineDetail;","map":{"version":3,"names":["React","useParams","Link","Typography","Button","Box","List","ListItem","ListItemText","useQuery","useMutation","useQueryClient","axios","jsx","_jsx","jsxs","_jsxs","fetchMachine","id","data","get","concat","fetchQCForms","completeMachineApi","post","MachineDetail","queryClient","machine","isLoading","queryKey","queryFn","qcForms","completeMutation","mutationFn","onSuccess","invalidateQueries","children","sx","mt","variant","name","model","productNo","masterCardInfo","href","target","map","qc","primary","status","completed","color","onClick","mutate","component","to","ml"],"sources":["D:/Krunal/catalisProject/frontend/src/MachineDetail.jsx"],"sourcesContent":["import React from 'react';\r\nimport { useParams, Link } from 'react-router-dom';\r\nimport { Typography, Button, Box, List, ListItem, ListItemText } from '@mui/material';\r\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\r\nimport axios from 'axios';\r\n\r\nconst fetchMachine = async (id) => {\r\n\tconst { data } = await axios.get(`/api/machines/${id}`);\r\n\treturn data;\r\n};\r\nconst fetchQCForms = async (id) => {\r\n\tconst { data } = await axios.get(`/api/qc?machineId=${id}`);\r\n\treturn data;\r\n};\r\nconst completeMachineApi = async (id) => {\r\n\tconst { data } = await axios.post(`/api/machines/${id}/complete`);\r\n\treturn data;\r\n};\r\n\r\nfunction MachineDetail() {\r\n\tconst { id } = useParams();\r\n\tconst queryClient = useQueryClient();\r\n\tconst { data: machine, isLoading } = useQuery({\r\n\t\tqueryKey: ['machine', id],\r\n\t\tqueryFn: () => fetchMachine(id)\r\n\t});\r\n\tconst { data: qcForms = [] } = useQuery({\r\n\t\tqueryKey: ['qcForms', id],\r\n\t\tqueryFn: () => fetchQCForms(id)\r\n\t});\r\n\tconst completeMutation = useMutation({\r\n\t\tmutationFn: () => completeMachineApi(id),\r\n\t\tonSuccess: () => queryClient.invalidateQueries({ queryKey: ['machine', id] })\r\n\t});\r\n\r\n\tif (isLoading || !machine) return <div>Loading...</div>;\r\n\treturn (\r\n\t\t<Box sx={{ mt: 2 }}>\r\n\t\t\t<Typography variant=\"h5\">{machine.name} Details</Typography>\r\n\t\t\t<Typography>Model: {machine.model || 'N/A'}</Typography>\r\n\t\t\t<Typography>Product No.: {machine.productNo || 'N/A'}</Typography>\r\n\t\t\t<Typography>Master Card: {machine.masterCardInfo || 'N/A'}</Typography>\r\n\t\t\t<Button href={`/api/machines/${id}/drawing`} target=\"_blank\" sx={{ mt: 1 }}>Download Electric Drawing</Button>\r\n\t\t\t<Typography sx={{ mt: 2 }}>QC Forms:</Typography>\r\n\t\t\t<List>\r\n\t\t\t\t{qcForms.map(qc => (\r\n\t\t\t\t\t<ListItem key={qc.id}>\r\n\t\t\t\t\t\t<ListItemText primary={`QC Form #${qc.id} (${qc.status})`} />\r\n\t\t\t\t\t\t<Button href={`/api/qc/${qc.id}/pdf`} target=\"_blank\">Download PDF</Button>\r\n\t\t\t\t\t</ListItem>\r\n\t\t\t\t))}\r\n\t\t\t</List>\r\n\t\t\t{!machine.completed && <Button variant=\"contained\" color=\"success\" onClick={() => completeMutation.mutate()}>Mark as Complete</Button>}\r\n\t\t\t<Button component={Link} to=\"/\" sx={{ ml: 2 }}>Back</Button>\r\n\t\t</Box>\r\n\t);\r\n}\r\nexport default MachineDetail;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}