{"ast":null,"code":"import React from'react';import{useParams,Link}from'react-router-dom';import{Typography,Button,Box,List,ListItem,ListItemText}from'@mui/material';import{useQuery,useMutation,useQueryClient}from'@tanstack/react-query';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const fetchMachine=async id=>{const{data}=await axios.get(\"/api/machines/\".concat(id));return data;};const fetchQCForms=async id=>{const{data}=await axios.get(\"/api/qc?machineId=\".concat(id));return data;};const completeMachineApi=async id=>{const{data}=await axios.post(\"/api/machines/\".concat(id,\"/complete\"));return data;};function MachineDetail(){const{id}=useParams();const queryClient=useQueryClient();const{data:machine,isLoading}=useQuery(['machine',id],()=>fetchMachine(id));const{data:qcForms=[]}=useQuery(['qcForms',id],()=>fetchQCForms(id));const completeMutation=useMutation(()=>completeMachineApi(id),{onSuccess:()=>queryClient.invalidateQueries(['machine',id])});if(isLoading||!machine)return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});return/*#__PURE__*/_jsxs(Box,{sx:{mt:2},children:[/*#__PURE__*/_jsxs(Typography,{variant:\"h5\",children:[machine.name,\" Details\"]}),/*#__PURE__*/_jsxs(Typography,{children:[\"Model: \",machine.model||'N/A']}),/*#__PURE__*/_jsxs(Typography,{children:[\"Product No.: \",machine.productNo||'N/A']}),/*#__PURE__*/_jsxs(Typography,{children:[\"Master Card: \",machine.masterCardInfo||'N/A']}),/*#__PURE__*/_jsx(Button,{href:\"/api/machines/\".concat(id,\"/drawing\"),target:\"_blank\",sx:{mt:1},children:\"Download Electric Drawing\"}),/*#__PURE__*/_jsx(Typography,{sx:{mt:2},children:\"QC Forms:\"}),/*#__PURE__*/_jsx(List,{children:qcForms.map(qc=>/*#__PURE__*/_jsxs(ListItem,{children:[/*#__PURE__*/_jsx(ListItemText,{primary:\"QC Form #\".concat(qc.id,\" (\").concat(qc.status,\")\")}),/*#__PURE__*/_jsx(Button,{href:\"/api/qc/\".concat(qc.id,\"/pdf\"),target:\"_blank\",children:\"Download PDF\"})]},qc.id))}),!machine.completed&&/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"success\",onClick:()=>completeMutation.mutate(),children:\"Mark as Complete\"}),/*#__PURE__*/_jsx(Button,{component:Link,to:\"/\",sx:{ml:2},children:\"Back\"})]});}export default MachineDetail;","map":{"version":3,"names":["React","useParams","Link","Typography","Button","Box","List","ListItem","ListItemText","useQuery","useMutation","useQueryClient","axios","jsx","_jsx","jsxs","_jsxs","fetchMachine","id","data","get","concat","fetchQCForms","completeMachineApi","post","MachineDetail","queryClient","machine","isLoading","qcForms","completeMutation","onSuccess","invalidateQueries","children","sx","mt","variant","name","model","productNo","masterCardInfo","href","target","map","qc","primary","status","completed","color","onClick","mutate","component","to","ml"],"sources":["D:/Krunal/catalisProject/frontend/src/MachineDetail.jsx"],"sourcesContent":["import React from 'react';\r\nimport { useParams, Link } from 'react-router-dom';\r\nimport { Typography, Button, Box, List, ListItem, ListItemText } from '@mui/material';\r\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\r\nimport axios from 'axios';\r\n\r\nconst fetchMachine = async (id) => {\r\n\tconst { data } = await axios.get(`/api/machines/${id}`);\r\n\treturn data;\r\n};\r\nconst fetchQCForms = async (id) => {\r\n\tconst { data } = await axios.get(`/api/qc?machineId=${id}`);\r\n\treturn data;\r\n};\r\nconst completeMachineApi = async (id) => {\r\n\tconst { data } = await axios.post(`/api/machines/${id}/complete`);\r\n\treturn data;\r\n};\r\n\r\nfunction MachineDetail() {\r\n\tconst { id } = useParams();\r\n\tconst queryClient = useQueryClient();\r\n\tconst { data: machine, isLoading } = useQuery(['machine', id], () => fetchMachine(id));\r\n\tconst { data: qcForms = [] } = useQuery(['qcForms', id], () => fetchQCForms(id));\r\n\tconst completeMutation = useMutation(() => completeMachineApi(id), {\r\n\t\tonSuccess: () => queryClient.invalidateQueries(['machine', id])\r\n\t});\r\n\r\n\tif (isLoading || !machine) return <div>Loading...</div>;\r\n\treturn (\r\n\t\t<Box sx={{ mt: 2 }}>\r\n\t\t\t<Typography variant=\"h5\">{machine.name} Details</Typography>\r\n\t\t\t<Typography>Model: {machine.model || 'N/A'}</Typography>\r\n\t\t\t<Typography>Product No.: {machine.productNo || 'N/A'}</Typography>\r\n\t\t\t<Typography>Master Card: {machine.masterCardInfo || 'N/A'}</Typography>\r\n\t\t\t<Button href={`/api/machines/${id}/drawing`} target=\"_blank\" sx={{ mt: 1 }}>Download Electric Drawing</Button>\r\n\t\t\t<Typography sx={{ mt: 2 }}>QC Forms:</Typography>\r\n\t\t\t<List>\r\n\t\t\t\t{qcForms.map(qc => (\r\n\t\t\t\t\t<ListItem key={qc.id}>\r\n\t\t\t\t\t\t<ListItemText primary={`QC Form #${qc.id} (${qc.status})`} />\r\n\t\t\t\t\t\t<Button href={`/api/qc/${qc.id}/pdf`} target=\"_blank\">Download PDF</Button>\r\n\t\t\t\t\t</ListItem>\r\n\t\t\t\t))}\r\n\t\t\t</List>\r\n\t\t\t{!machine.completed && <Button variant=\"contained\" color=\"success\" onClick={() => completeMutation.mutate()}>Mark as Complete</Button>}\r\n\t\t\t<Button component={Link} to=\"/\" sx={{ ml: 2 }}>Back</Button>\r\n\t\t</Box>\r\n\t);\r\n}\r\nexport default MachineDetail;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}